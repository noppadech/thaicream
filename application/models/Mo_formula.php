<?phpinclude('Da_formula.php');class Mo_formula extends Da_formula {    //put your code here    public function __construct() {        parent::__construct();    }    public function insert_formula_details() {        $this->_table = "tc_formula_details";        $data = array(            'ref_formula_id' => $this->ref_formula_id,            'formula_name' => $this->formula_name,            'formula_remark' => $this->formula_remark,            'status' => 0,            'create_by' => $this->create_by,            'create_date' => date('Y-m-d'),        );        return $this->insert($data);    }    public function update_formula_details($primary_value) {        $this->_table = "tc_formula_details";        $data = array(            'formula_name' => $this->formula_name,            'formula_remark' => $this->formula_remark,        );        $this->update($primary_value, $data);    }    public function delete_formula_details($id) {        $this->_table = "tc_formula_details";        $this->delete($id);    }    public function insert_formula_path() {        $this->_table = "tc_formula_path";        $data = array(            'ref_formula_details_id' => $this->ref_formula_details_id,            'path_name' => $this->path_name        );        return $this->insert($data);    }    public function update_formula_path($primary_value) {        $this->_table = "tc_formula_path";        $data = array(            'path_name' => $this->path_name        );        $this->update($primary_value, $data);    }    public function remove_formula_path($primary_value) {        $this->_table = "tc_formula_path";        $this->primary_key = "id";        $this->delete($primary_value);        //break        $this->_table = "tc_formula_path_details";        $this->primary_key = "ref_formula_path";        $this->delete($primary_value);    }    public function insert_formula_path_details() {        $this->_table = "tc_formula_path_details";        $data = array(            'ref_formula_path' => $this->ref_formula_path,            'path_materials_code' => $this->path_materials_code,            'path_materials_quantity' => $this->path_materials_quantity        );        return $this->insert($data);    }    public function update_formula_path_details($primary_value) {        $this->_table = "tc_formula_path_details";        $data = array(            'path_materials_code' => $this->path_materials_code,            'path_materials_quantity' => $this->path_materials_quantity        );        $this->update($primary_value, $data);    }    public function remove_formula_path_details($primary_value) {        $this->_table = "tc_formula_path_details";        $this->primary_key = "id";        $this->delete($primary_value);    }    public function get_formula_details() {        $this->_table = "tc_formula_details";        $this->order_by("id", "ASC");        return $this->get_all();    }    public function get_formula_details_ref_id($id) {        $this->_table = "tc_formula_details";        $this->primary_key = "ref_formula_id";        $this->db->where($this->primary_key, $id);        return $this->get_all();    }    public function get_formula_details_selected_ref_id($id) {        $this->_table = "tc_formula_details";        $this->primary_key = "ref_formula_id";        $this->db->where($this->primary_key, $id);//        $this->db->where("", $id);        return $this->get_all();    }    public function get_formula_details_id($tester_id) {        $this->_table = "tc_formula_details";        return $this->get($tester_id);    }    public function get_formula_path_id($ref_formula_details_id) {        $this->_table = "tc_formula_path";        $this->db->where('ref_formula_details_id =', $ref_formula_details_id);        return $this->get_all();    }    public function get_formula_path_details_id($ref_formula_path) {//        SELECT//        tc_formula_path_details.id,//        tc_formula_path_details.ref_formula_path,//        tc_formula_path_details.path_materials_code,//        tc_formula_path_details.path_materials_quantity,//        tc_material_master.material_supplier,//        tc_material_master.material_code,//        tc_material_master.material_trade_name,//        tc_material_master.material_trade_name_2,//        tc_material_master.role//        FROM `tc_formula_path_details` //        LEFT JOIN tc_material_master ON         $this->select("tc_formula_path_details.id,        tc_formula_path_details.ref_formula_path,        tc_formula_path_details.path_materials_code,        tc_formula_path_details.path_materials_quantity,        tc_material_master.material_supplier,        tc_material_master.material_code,        tc_material_master.material_trade_name,        tc_material_master.material_trade_name_2");        $this->_table = "tc_formula_path_details";        $this->db->join('tc_material_master','tc_formula_path_details.path_materials_code = tc_material_master.id','left');        $this->db->where('ref_formula_path', $ref_formula_path);        return $this->get_all();    }    public function get_fda_all() {        $this->_table = "tc_formula";        $this->db->where('formula_status', '1');        return $this->get_all();    }    public function get_fda_details() {        $this->db->from('tc_formula_details');        $this->db->where('status', 1);        $this->db->order_by('formula_name', 'ASC');        return $this->db->get()->result();    }}